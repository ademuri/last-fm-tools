load("@io_bazel_rules_go//go:def.bzl", "go_library")

go_library(
  name = "go-sqlite3",
  importpath = "github.com/mattn/go-sqlite3",
  srcs = glob(["*.go", "*.h", "*.c"]),
  visibility = ["//visibility:public"],
  cgo = True,
  clinkopts = select({
      "@io_bazel_rules_go//go/platform:linux": [
          "-ldl",
      ],
      "@io_bazel_rules_go//go/platform:windows": [
          "-lmingwex -lmingw32",
      ],
      "//conditions:default": [],
  }),
)

